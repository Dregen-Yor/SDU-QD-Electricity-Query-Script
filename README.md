# 山东大学青岛校区山大V卡通2.0版本电量查询接口

曾经的电量查询脚本[SDUQD-Electricity-Inquiry](https://github.com/SkywalkerWei/SDUQD-Electricity-Inquiry) 停止维护，本人在抓包研究后决定自己写一款新的脚本。

不再需要进入山大v卡通即可查询宿舍当前电费余量，可以与qq-bot 或短信接发平台结合制作定时电费提醒（电费预警）程序，本项目提供使用 Github Action 进行电量提醒。

目前可查 `S1 S2 S5 S6 S7 S8 S9 S10 S11 B1 B2 B5 B9 B10 T1 T2 T3`

目前测试结果表明 `Synjones-Auth` 字段并不会过期，可以长期使用。

目前 `Synjones-Auth` 字段获取方法有两种，一种是网页端抓包，另一种是手机端抓包。

其中网页端抓包较为简单，手机端抓包比较复杂，且两种抓包方式抓取的字段内容不同。

当网页端重新登陆后，原字段会失效，需要修改为新的字段，手机端同样道理。

但是网页端会经常性登陆过期，重新登陆后需要修改项目中的配置信息，手机端不需要，所以常用网页端V卡通的同学需要注意。

推荐使用网页端进行抓包，且一次抓包后不再登陆网页版V卡通。


[Synjones-Auth 字段获取教程（网页版）](guide/网页端抓包教程.md)

[Synjones-Auth 字段获取教程（手机版）](guide/burpsuite手机抓包教程.md)

## 依赖安装

- `pip install -r requirements.txt`
- Python版本为3.12.7

## 使用方法

在config.yaml中填入手机抓包获取的 `Synjones-Auth` 字段信息。

之后在其他 Python 文件中调用 query 函数即可。

若想启动网页查询页面，安装依赖后在终端中运行

~~~
streamlit run webUI.py
~~~

## 隐私声明

所有服务均在本地运行，不会保存或上传任何用户数据，可放心使用。可能会在同级目录下生成缓存文件，清理不影响使用。

## 未来计划

- ~~加入手机抓包教程~~
- ~~制作可视化页面~~

> 目前都已完成
